<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="(1T`=f;8SeIQGH`N+~do">dot</variable><variable id="cK=uNz+F=?6GRl^(W7^Q">targetX</variable><variable id="3^#~l{0;^d0o^+ItidY4">targetY</variable><variable id="UdI{3rq,[7*6QX,qa1|k">cross</variable><variable id="R@7=s8NpT+ATF`(/)X7[">error</variable><variable id="fwsF*J2p[OuJm;Q8h,3H">P</variable><variable id="OK1AS|;Rg}*hkG?WTXn?">kp</variable><variable id="X~a_SE[zeM.2ML,UY|;]">integral</variable><variable id="KG8R|kuse?a(d=cqAfS^">I</variable><variable id="j,W2kf?+DwG}I17#yyA8">ki</variable><variable id="M(7AH?+8v6zTaG-9L5xB">derivative</variable><variable id="C$ThK|Ulw.|FI~0rgbcU">lastError</variable><variable id=")Ieu9NZiQ~IE6e+_cE06">D</variable><variable id="r+LkkqFAdUIvXy-BRkK5">kd</variable><variable id="|MYMsQP_V2$B6~5.u5I5">output</variable><variable id="q5FBf?iI`rk(di2_)dL5">magAbs</variable><variable id="Mdd}!;A4P@wsRL-n:LOZ">xComp</variable><variable id="uIRj(HKTfkfR~G$gTOmR">yComp</variable><variable id="{pA~RXGep#t_g*Nt$d!.">zComp</variable><variable id="A700djGf+^%?h}]m(G^M">rotAngle</variable><variable id="`H]o8%JHO(%8KI`{0ScO">speed</variable><variable id="%+NtJL/=LfAMLcnl(VRo">targetAngle</variable><variable id="rQIn)ICcp@Ccn.BNJ!Ie">minSpeed</variable></variables><block type="pxt-on-start" id="QSx94!#%|`|hwxkF4$S;" x="37" y="49"><statement name="HANDLER"><block type="variables_set" id="q.OOgt_HR8$^${k[iANo"><field name="VAR" id="%+NtJL/=LfAMLcnl(VRo">targetAngle</field><value name="VALUE"><shadow type="math_number" id="0Tl=yw)WOaR}FIN90G{c"><field name="NUM">-110</field></shadow></value><next><block type="variables_set" id="z)|N{Ot,m$BG?b!yJM8="><field name="VAR" id="cK=uNz+F=?6GRl^(W7^Q">targetX</field><value name="VALUE"><shadow type="math_number" id="4E?0SP~RtwlAjI2:o770"><field name="NUM">0</field></shadow><block type="math_js_op" id="7WDY[ip{6|{(Z0j{^zkN"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="unary"></mutation><field name="OP">cos</field><value name="ARG0"><shadow type="math_number" id=";7zOUhANg92Fv{Awc`N~"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="J~#(fUv4ZB^N*;6ITmd|"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="=qSdiAibm3dc)yz{Vo_o"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="lt{|WHP3Wrln+jnK!/]p"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id=";`H=RCJ80gU*HrA%Ugli"><field name="NUM">0</field></shadow><block type="variables_get" id="YQDY`LwuUdKyQn-K^N{L"><field name="VAR" id="%+NtJL/=LfAMLcnl(VRo">targetAngle</field></block></value><value name="B"><shadow type="math_number" id="^_^veol@qFrTEa3oL:eF"><field name="NUM">0</field></shadow><block type="Math__constant" id="akM*PbN7T|#`PF]nFS_M"><field name="MEMBER">Math.PI</field></block></value></block></value><value name="B"><shadow type="math_number" id="}Q+E,HHum8fRbT1]%Llp"><field name="NUM">180</field></shadow></value></block></value></block></value><next><block type="variables_set" id="tp_.V7,Glh2*3BGg~@n6"><field name="VAR" id="3^#~l{0;^d0o^+ItidY4">targetY</field><value name="VALUE"><shadow type="math_number" id="xj!BoG8yQ~cnAW~.S}Vs"><field name="NUM">0</field></shadow><block type="math_js_op" id="eD;ToKMhRo@qELXZuaaK"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="unary"></mutation><field name="OP">sin</field><value name="ARG0"><shadow type="math_number" id="/OZJ4tTxq%Cp,39~YO!%"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="m9[c.7Ka31qSg~SZ?Sxx"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="3t@rFqyB(-,G9D@SS|!w"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="[rr0#Pao[e~C.]%dp~r3"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="DgDtE)%[uPp3KW+s/3k5"><field name="NUM">0</field></shadow><block type="variables_get" id="uiC8)^#%+@UMUFkpsdb~"><field name="VAR" id="%+NtJL/=LfAMLcnl(VRo">targetAngle</field></block></value><value name="B"><shadow type="math_number" id="+[yuysP1(7+:4Mmt=Lz{"><field name="NUM">0</field></shadow><block type="Math__constant" id=")s{qmV04jh`LIii~(Vo."><field name="MEMBER">Math.PI</field></block></value></block></value><value name="B"><shadow type="math_number" id="$:Z$Mf9o^avNfb!Q;-7s"><field name="NUM">180</field></shadow></value></block></value></block></value><next><block type="basic_show_icon" id="hJO0zo)2~Z;~42a:Ie1="><field name="i">IconNames.Heart</field><next><block type="variables_set" id="E|xa:W_$g47LLiT1PLR-"><field name="VAR" id="OK1AS|;Rg}*hkG?WTXn?">kp</field><value name="VALUE"><shadow type="math_number" id="eid`*#!ps4LZLW=Jqn{n"><field name="NUM">0.3</field></shadow></value><next><block type="variables_set" id="_``j74ZQ;af#tSOqetZb"><field name="VAR" id="j,W2kf?+DwG}I17#yyA8">ki</field><value name="VALUE"><shadow type="math_number" id="JZ?}PK.KB/5eiQ.!Q`ob"><field name="NUM">0</field></shadow></value><next><block type="variables_set" id="f9V6!Fvs1_`,^e/FI?Ec"><field name="VAR" id="r+LkkqFAdUIvXy-BRkK5">kd</field><value name="VALUE"><shadow type="math_number" id="5iPO./321vdon7Mgc#Lq"><field name="NUM">1.5</field></shadow></value><next><block type="variables_set" id="OO=(PO_XS#7I-]7Wyi|3"><field name="VAR" id="rQIn)ICcp@Ccn.BNJ!Ie">minSpeed</field><value name="VALUE"><shadow type="math_number" id="P,r0~56*d%l3^nS}lIiz"><field name="NUM">0.5</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="control_in_background" id="=71n12GKyB1z+m-j.=Rw" x="762" y="72"><statement name="HANDLER"><block type="device_while" id="/=?GauEZrUE4z%xT7Jd7"><value name="COND"><shadow type="logic_boolean" id="TrqV;0}2lRy%kM@yq8aP"><field name="BOOL">TRUE</field></shadow></value><statement name="DO"><block type="variables_set" id="HYlC{KL9jAj9:psUu.{["><field name="VAR" id="q5FBf?iI`rk(di2_)dL5">magAbs</field><value name="VALUE"><shadow type="math_number" id="(|mVZZaOOb~u2.Kw|$2t"><field name="NUM">0</field></shadow><block type="device_get_magnetic_force" id="2h8T678;|PYf%L-E{oQ~"><field name="NAME">Dimension.Strength</field></block></value><next><block type="variables_set" id=":*|X3UB5OW=4.Ku!`X8%"><field name="VAR" id="Mdd}!;A4P@wsRL-n:LOZ">xComp</field><value name="VALUE"><shadow type="math_number" id="TNX_qtnn9X)ItHOhT8tV"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="{:lshM9]9gSouMxRg=Yh"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="*4qVvRlTjHZHk635^=Zu"><field name="NUM">0</field></shadow><block type="device_get_magnetic_force" id="pmkCHxHXh,|1$kzt[x=K"><field name="NAME">Dimension.X</field></block></value><value name="B"><shadow type="math_number" id="lK;Ytx)owJU5l3RueUt;"><field name="NUM">0</field></shadow><block type="variables_get" id="+{;LeQv_4HU1:pkDVM2j"><field name="VAR" id="q5FBf?iI`rk(di2_)dL5">magAbs</field></block></value></block></value><next><block type="variables_set" id="5b=fnE~]yk_!lg*r#{/J"><field name="VAR" id="uIRj(HKTfkfR~G$gTOmR">yComp</field><value name="VALUE"><shadow type="math_number" id="LVl-$MU!2Vi+,7G%~_;="><field name="NUM">0</field></shadow><block type="math_arithmetic" id="G_ej{)5,jzjc|E@[FNiU"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="o)S?HQ3P*tdD5HgWX5nc"><field name="NUM">0</field></shadow><block type="device_get_magnetic_force" id="}IQ9PG0[ce{~%L%Au)l|"><field name="NAME">Dimension.Y</field></block></value><value name="B"><shadow type="math_number" id="*]$D(Q)Xm^8PMPU+It0`"><field name="NUM">0</field></shadow><block type="variables_get" id="jYA9^KUmNogTvbw2St#n"><field name="VAR" id="q5FBf?iI`rk(di2_)dL5">magAbs</field></block></value></block></value><next><block type="variables_set" id="p^rV^}c4DMB9V@.x~}uo"><field name="VAR" id="A700djGf+^%?h}]m(G^M">rotAngle</field><value name="VALUE"><shadow type="math_number" id="y6Er6cyd}fT@pHx1bvF%"><field name="NUM">0</field></shadow><block type="math_js_op" id="c$u/q5MU#Bj^4qN]c3|/"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="binary"></mutation><field name="OP">atan2</field><value name="ARG0"><shadow type="math_number" id="om_yA!KbwYJ$(@Q_}xQ*"><field name="NUM">0</field></shadow><block type="variables_get" id="$)btpk`;tML/8I~8HY$y"><field name="VAR" id="uIRj(HKTfkfR~G$gTOmR">yComp</field></block></value><value name="ARG1"><shadow type="math_number" id="Sv=?AgIGczu~cqZmA^+1"><field name="NUM">0</field></shadow><block type="variables_get" id=",}d%ddqi#nW7Bg_teu@."><field name="VAR" id="Mdd}!;A4P@wsRL-n:LOZ">xComp</field></block></value></block></value><next><block type="controls_if" id="s}k{rf8k}baJ!SVL@s]@"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id=".j.+wJDx60joG1jo~tjS"><field name="BOOL">TRUE</field></shadow><block type="device_get_button2" id="hq5jBK/LpoLeCxe$yTx:"><field name="NAME">Button.A</field></block></value><statement name="DO0"><block type="variables_set" id="N8BY-?HfMJ9L/KZQ!dXs"><field name="VAR" id="`H]o8%JHO(%8KI`{0ScO">speed</field><value name="VALUE"><shadow type="math_number" id="{4x!(,S?(IU=C_FR~hC{"><field name="NUM">0</field></shadow><block type="function_call_output" id="Je8*~_X[76xb7-oRK6XW"><mutation name="updatePID" functionid="[k(z0-VrWPkArYe?0Aok"><arg name="mx" id="52q99dbrvowy0sfhz7olh" type="number"></arg><arg name="my" id="rd18y1fudpk20ci1zd8e" type="number"></arg></mutation><value name="52q99dbrvowy0sfhz7olh"><shadow type="math_number" id="1EQVn;d47-@#`/UV0K)v"><field name="NUM">0</field></shadow><block type="variables_get" id="H8v.YM-Wy8}79cm+vr(8"><field name="VAR" id="Mdd}!;A4P@wsRL-n:LOZ">xComp</field></block></value><value name="rd18y1fudpk20ci1zd8e"><shadow type="math_number" id="18Bg7sejgcwsI8~Mk3i{"><field name="NUM">1</field></shadow><block type="variables_get" id="?HAGsWO9He+S~SS)8!mi"><field name="VAR" id="uIRj(HKTfkfR~G$gTOmR">yComp</field></block></value></block></value><next><block type="controls_if" id="JT[lZ[0qsQb/bmQrOxIM"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="k%nX,bhA(fEQf.=5Z*=G"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="aYy3#A${M04ZAO?jL!3k"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="xEW6aEd.fjeEHKyC3Od4"><field name="NUM">0</field></shadow><block type="variables_get" id="j*J-^kYKfkRkrgzfBG1j"><field name="VAR" id="`H]o8%JHO(%8KI`{0ScO">speed</field></block></value><value name="B"><shadow type="math_number" id="{rFJ#KdFy4PU2lS0dPKN"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="kitronik_motor_on" id="7BPKo@S}ex}SWR!EX-{U"><field name="motor">Kitronik_Robotics_Board.Motors.Motor1</field><field name="dir">Kitronik_Robotics_Board.MotorDirection.Reverse</field><value name="speed"><shadow type="math_number_minmax" id="n^3WJDO2Z=l.YO#0/{.v"><mutation min="0" max="100" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_op2" id="Pj)lmDa-j3kTrP8gXegN"><field name="op">max</field><value name="x"><shadow type="math_number" id="TRnS#)q/jS`]T+PsTjij"><field name="NUM">1</field></shadow><block type="variables_get" id="[Ja{3kLHb`X?n)r%6Z+R"><field name="VAR" id="rQIn)ICcp@Ccn.BNJ!Ie">minSpeed</field></block></value><value name="y"><shadow type="math_number" id="^Ta|O{,wgSZLF(MRKtDQ"><field name="NUM">0</field></shadow><block type="math_op3" id="(j]icRT(Zj;+dWf8^48."><value name="x"><block type="variables_get" id="9by@2[gytFYPIX2V%mS4"><field name="VAR" id="`H]o8%JHO(%8KI`{0ScO">speed</field></block></value></block></value></block></value></block></statement><statement name="ELSE"><block type="kitronik_motor_on" id="8Pg36``$1xw-w#?U|HGq"><field name="motor">Kitronik_Robotics_Board.Motors.Motor1</field><field name="dir">Kitronik_Robotics_Board.MotorDirection.Forward</field><value name="speed"><shadow type="math_number_minmax" id="BDH{JzS1CeK/XQ~H8W4{"><mutation min="0" max="100" precision="0"></mutation><field name="SLIDER">0</field></shadow><block type="math_op2" id="HoS.T:6!xPuga4#]-~}#"><field name="op">max</field><value name="x"><shadow type="math_number" id="[_~a(UaVs4:xz_-4*:^%"><field name="NUM">1</field></shadow><block type="variables_get" id="aPltNn-Q@-/$8nN[??O."><field name="VAR" id="rQIn)ICcp@Ccn.BNJ!Ie">minSpeed</field></block></value><value name="y"><shadow type="math_number" id="b9Pj~]ZqLoC3-Ye/vxbK"><field name="NUM">0</field></shadow><block type="math_op3" id="8x)d/?/AxB5^(DZlQaC9"><value name="x"><block type="variables_get" id="f.C/;3rZ|uCQK(qWnvvJ"><field name="VAR" id="`H]o8%JHO(%8KI`{0ScO">speed</field></block></value></block></value></block></value></block></statement></block></next></block></statement><statement name="ELSE"><block type="kitronik_motor_off" id="CdsRi]oik2mx1,V]aEVr"><field name="motor">Kitronik_Robotics_Board.Motors.Motor1</field></block></statement><next><block type="serial_writevalue" id="@rSOQRE*:lj:3QC9TR6T"><value name="name"><shadow type="text" id="Lb^Jy[?bdbJ-fatH3lYb"><field name="TEXT">P</field></shadow></value><value name="value"><block type="variables_get" id="_h%P4@n(r##E5`;V=eFZ"><field name="VAR" id="fwsF*J2p[OuJm;Q8h,3H">P</field></block></value><next><block type="serial_writevalue" id="hxnR7QTsoBC]wFxV/:cX"><value name="name"><shadow type="text" id="kLPEZ%4S{46X+w7!JP8$"><field name="TEXT">I</field></shadow></value><value name="value"><block type="variables_get" id="#dLw13/|}b+,6qzr88E!"><field name="VAR" id="KG8R|kuse?a(d=cqAfS^">I</field></block></value><next><block type="serial_writevalue" id="k.1JBujAq_x1?s`j;/lO"><value name="name"><shadow type="text" id="$an#a0t/@`_8q!eQ!V2j"><field name="TEXT">D</field></shadow></value><value name="value"><block type="variables_get" id="JUVgHj,p%8=au)nRX^%N"><field name="VAR" id=")Ieu9NZiQ~IE6e+_cE06">D</field></block></value><next><block type="serial_writevalue" id="z9{[NGZ-OlLn?2iS`y%0"><value name="name"><shadow type="text" id="{Nl/zWB,5p+24apN5Onq"><field name="TEXT">c</field></shadow></value><value name="value"><block type="variables_get" id="bpP7t6M-Udvjb:E#YRSt"><field name="VAR" id="A700djGf+^%?h}]m(G^M">rotAngle</field></block></value><next><block type="serial_writevalue" id="S}IVD``D@?qYPTC}kub9"><value name="name"><shadow type="text" id="|lrjFu`uI01rBQA1-|XY"><field name="TEXT">speed</field></shadow></value><value name="value"><block type="variables_get" id="DO/4`PolB]yErybfCl]^"><field name="VAR" id="`H]o8%JHO(%8KI`{0ScO">speed</field></block></value><next><block type="control_wait_us" id="eT6/{#Yp@zTr;kI$W|Qa"><value name="micros"><shadow type="math_number_minmax" id="DiwGD`h`$y`8Fx2cx2S!"><mutation min="0" max="6000" label="Micros" precision="0"></mutation><field name="SLIDER">1000</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type="function_definition" id="*Xp%Q?sh.mC[Vx_^!E6H" x="1678" y="140"><mutation name="updatePID" functionid="[k(z0-VrWPkArYe?0Aok"><arg name="mx" id="52q99dbrvowy0sfhz7olh" type="number"></arg><arg name="my" id="rd18y1fudpk20ci1zd8e" type="number"></arg></mutation><field name="function_name">updatePID</field><value name="52q99dbrvowy0sfhz7olh"><block type="argument_reporter_number" id="_cGCk%@AO{U.N6kRQ`Ez" deletable="false"><field name="VALUE">mx</field></block></value><value name="rd18y1fudpk20ci1zd8e"><block type="argument_reporter_number" id="Un]rFV85s~Y1hx{nDBO6" deletable="false"><field name="VALUE">my</field></block></value><statement name="STACK"><block type="variables_set" id="IfN`{-+2vvJFu`%as~PX"><field name="VAR" id="(1T`=f;8SeIQGH`N+~do">dot</field><comment pinned="false" h="80" w="160">1. Complex multiplication to find the rotational difference
This naturally handles the 360 wrap-around</comment><value name="VALUE"><shadow type="math_number" id="US]V`)+wFKS~,ab(N8%3"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="w@#X:^(CgwSsCyo|*F9Y"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="E[b:`Y}gM8gl3uC]++Ea"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="|bYyM14chqmcG`/zdahC"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="QVMCRtdPb9G^H98s(;Ow"><field name="NUM">0</field></shadow><block type="variables_get" id="rVY?eUk4${Yp(IDPG|D5"><field name="VAR" id="cK=uNz+F=?6GRl^(W7^Q">targetX</field></block></value><value name="B"><shadow type="math_number" id="U-?,L%Yd+?*jjaY=[YxE"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="9h%EXp`nk^Rd{@`*]iXh"><field name="VALUE">mx</field></block></value></block></value><value name="B"><shadow type="math_number" id="F7HutN-iv-3M~m*%@b,e"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="Vcp@5#9T$+m#r+Ej+3wy"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="GxEiO3INVi(O`4jfgy`{"><field name="NUM">0</field></shadow><block type="variables_get" id="k0^D:0RKWuCF+qcT)I]u"><field name="VAR" id="3^#~l{0;^d0o^+ItidY4">targetY</field></block></value><value name="B"><shadow type="math_number" id="n9Hqv1u+!I.*#2{h(E`I"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Jt0#*{B(gnm%*we$Rj;y"><field name="VALUE">my</field></block></value></block></value></block></value><next><block type="variables_set" id="xkZw-(e^aO7dWKN;C}y;"><field name="VAR" id="UdI{3rq,[7*6QX,qa1|k">cross</field><value name="VALUE"><shadow type="math_number" id="43k!Vi?/E`PWU/9$q)Q7"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="6b~i7n/jR2EK2x)gu5D9"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="DfTi1a.6arI{?Y):p|Di"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="TZq8X}Y)l-H,{?{l),r;"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="Y:`rqhRc*ZOa;x)^~?8c"><field name="NUM">0</field></shadow><block type="variables_get" id="4NIiG3_W0NyxvMLy23JW"><field name="VAR" id="3^#~l{0;^d0o^+ItidY4">targetY</field></block></value><value name="B"><shadow type="math_number" id="1!_SxG@-7{gr:P(ZQA.i"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="VnzD~t$J.UBi;*9,%=TP"><field name="VALUE">mx</field></block></value></block></value><value name="B"><shadow type="math_number" id="_LeABMki{~i!Htw0VyMb"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="l8h-;dYl=D~XfGtNJ;ZE"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="8au2YZftFH[m5h_L#`Pd"><field name="NUM">0</field></shadow><block type="variables_get" id="BIS6Bb@7b(EPV91[G:]D"><field name="VAR" id="cK=uNz+F=?6GRl^(W7^Q">targetX</field></block></value><value name="B"><shadow type="math_number" id="sRwEZJlWeHwFqF?hcMQ]"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="AqLOB`!#`0Q:::g@2][v"><field name="VALUE">my</field></block></value></block></value></block></value><next><block type="variables_set" id="Owj/J%.*PhQKumY|8w+6"><field name="VAR" id="R@7=s8NpT+ATF`(/)X7[">error</field><comment pinned="false" h="80" w="160">2. The error is the angle of that difference</comment><value name="VALUE"><shadow type="math_number" id="z@XzX1TwCr[zR{c36(r~"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="[qsO~tsQ%8%^6vkuwPXt"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="mAkGNuu[g;f_Nvp}jJIu"><field name="NUM">0</field></shadow><block type="math_js_op" id=",Wh[Y|*#ShLTyW(X*L*t"><mutation xmlns="http://www.w3.org/1999/xhtml" op-type="binary"></mutation><field name="OP">atan2</field><value name="ARG0"><shadow type="math_number" id="@0?Ws(ZL7@Q^5N:1~BK!"><field name="NUM">0</field></shadow><block type="variables_get" id="3)5KSEO8Wo!O)U~tW{%G"><field name="VAR" id="UdI{3rq,[7*6QX,qa1|k">cross</field></block></value><value name="ARG1"><shadow type="math_number" id="At{2S7{A*6S+OuZ*H;K%"><field name="NUM">0</field></shadow><block type="variables_get" id="cjvUsxb[hx]Of=72_CMX"><field name="VAR" id="(1T`=f;8SeIQGH`N+~do">dot</field></block></value></block></value><value name="B"><shadow type="math_number" id="J#_C)3E$XZp.HIYPEu)j"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="W8zeqFSH4#?X%^|*kY^#"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number" id="U?EAMwYNa1j~w=ES#gX~"><field name="NUM">180</field></shadow></value><value name="B"><shadow type="math_number" id="YGu;2R+`Uk}wGGCa%.)c"><field name="NUM">0</field></shadow><block type="Math__constant" id="u-O5!#rwbv?Y|A;[7_-b"><field name="MEMBER">Math.PI</field></block></value></block></value></block></value><next><block type="variables_set" id="oP-{lAR}(P}Z9D/.Qo]/"><field name="VAR" id="fwsF*J2p[OuJm;Q8h,3H">P</field><comment pinned="false" h="80" w="160">error = target - current
1. Proportional: Direct response to error</comment><value name="VALUE"><shadow type="math_number" id="Ci*n^,VTPcz+DUnF$Q*,"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="nB=K|YJyyMk9Di3wx6az"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="jF7@ampo[AWtJgEw8+3."><field name="NUM">0</field></shadow><block type="variables_get" id="Ss2FWLpSYgo87GoGe2KZ"><field name="VAR" id="OK1AS|;Rg}*hkG?WTXn?">kp</field></block></value><value name="B"><shadow type="math_number" id="!ON{8-U*z3a$-z~}1jIr"><field name="NUM">0</field></shadow><block type="variables_get" id="-tx={Oz3hwZI5RFVDc1F"><field name="VAR" id="R@7=s8NpT+ATF`(/)X7[">error</field></block></value></block></value><next><block type="variables_set" id="R)D{Bi2BIQtW,ON/Zpm]"><field name="VAR" id="X~a_SE[zeM.2ML,UY|;]">integral</field><comment pinned="false" h="80" w="160">2. Integral: Fixes long-term drift (with clamping to prevent "windup")</comment><value name="VALUE"><shadow type="math_number" id="(WFh*|;uP=363l},`=Xm"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="t$RMNYYz:1+7l6!nAYY+"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="Y}Tsnh.QLDIGGQ-0TI-c"><field name="NUM">0</field></shadow><block type="variables_get" id="`{KvtbEI(3+a_ynwsd@V"><field name="VAR" id="X~a_SE[zeM.2ML,UY|;]">integral</field></block></value><value name="B"><shadow type="math_number" id="%pZ*5}sxD``%guiHFJBD"><field name="NUM">0</field></shadow><block type="variables_get" id="PVdK4|dNITK19M^3L0Im"><field name="VAR" id="R@7=s8NpT+ATF`(/)X7[">error</field></block></value></block></value><next><block type="controls_if" id="3KBs$qBI3/P^+hvv/8t$"><value name="IF0"><shadow type="logic_boolean" id="^Z-ep$IjTee}vEJmdsqR"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="47|jB+7eDG:7dBs*b/ea"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="6OILb6-5+x+mU8]jd;P]"><field name="NUM">0</field></shadow><block type="variables_get" id="BhVD+AkY$eRB|)sCm]63"><field name="VAR" id="X~a_SE[zeM.2ML,UY|;]">integral</field></block></value><value name="B"><shadow type="math_number" id="eTO`169+Fk()AAO2`+?b"><field name="NUM">100</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="As@|zrrfqZ*%XL.g|}%3"><field name="VAR" id="X~a_SE[zeM.2ML,UY|;]">integral</field><value name="VALUE"><shadow type="math_number" id="}.FLRaGfI3k74?R2)885"><field name="NUM">100</field></shadow></value></block></statement><next><block type="controls_if" id="2Sma@VKy|LD[)G%MGXzc"><value name="IF0"><shadow type="logic_boolean" id="iwWwc/)etmgLigV#l6Q{"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="+1/pgKZt0.tIUWlFIF3H"><field name="OP">LT</field><value name="A"><shadow type="math_number" id="9j_eK(}[%e:W6!V3f1Ax"><field name="NUM">0</field></shadow><block type="variables_get" id="ZLbA88_1v.UBE~Mk|D{|"><field name="VAR" id="X~a_SE[zeM.2ML,UY|;]">integral</field></block></value><value name="B"><shadow type="math_number" id="uW,{4u;PI9{2#0St9lQ0"><field name="NUM">-100</field></shadow></value></block></value><statement name="DO0"><block type="variables_set" id="!l`/L8]6^c[zY{;hzJsr"><field name="VAR" id="X~a_SE[zeM.2ML,UY|;]">integral</field><value name="VALUE"><shadow type="math_number" id="ynj`z;z_whEU[jzLapMG"><field name="NUM">-100</field></shadow></value></block></statement><next><block type="variables_set" id="ekoitdajyqCZ)i)w}9w-"><field name="VAR" id="KG8R|kuse?a(d=cqAfS^">I</field><value name="VALUE"><shadow type="math_number" id="WLaC04YM%lPSMK3B-:Q$"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="|aJ+Tr%7{o1;MVc#BfD="><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="wb)?FB1tC_JSB`uj`HBk"><field name="NUM">0</field></shadow><block type="variables_get" id="Z4?4d)(84FGNV`=%2$gJ"><field name="VAR" id="j,W2kf?+DwG}I17#yyA8">ki</field></block></value><value name="B"><shadow type="math_number" id="P-)CxXhS/(pP)ZNIo;mP"><field name="NUM">0</field></shadow><block type="variables_get" id="%jHet^dB7+%t*ZO$aKlL"><field name="VAR" id="X~a_SE[zeM.2ML,UY|;]">integral</field></block></value></block></value><next><block type="variables_set" id="+vao~DPhLA%hMABc*E9M"><field name="VAR" id="M(7AH?+8v6zTaG-9L5xB">derivative</field><comment pinned="false" h="80" w="160">3. Derivative: Dampens "bouncing"</comment><value name="VALUE"><shadow type="math_number" id="?y)o++jd:I7-f)obmX^D"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="/2q@oAesWX?tk*amfnQx"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="Wm@V+0)Ae/^.D.81{5_C"><field name="NUM">0</field></shadow><block type="variables_get" id="y7wtq!{=xY}q-hnHVjV3"><field name="VAR" id="R@7=s8NpT+ATF`(/)X7[">error</field></block></value><value name="B"><shadow type="math_number" id="Yh]ZBd*[{lfv*%)Y[y-h"><field name="NUM">0</field></shadow><block type="variables_get" id="0{16jbbXSxRL$_!X,w}+"><field name="VAR" id="C$ThK|Ulw.|FI~0rgbcU">lastError</field></block></value></block></value><next><block type="variables_set" id=".~y|f8eh|ER]wt5VH!/I"><field name="VAR" id=")Ieu9NZiQ~IE6e+_cE06">D</field><value name="VALUE"><shadow type="math_number" id="WBdE@`$#Jy6ROQ}=om:q"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="qnco3(s+5{Cgs{Bp~lYF"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id=";f8*Bv~1ch4a+3fI_j96"><field name="NUM">0</field></shadow><block type="variables_get" id="mdZq.5.vms7`fV{mLgtg"><field name="VAR" id="r+LkkqFAdUIvXy-BRkK5">kd</field></block></value><value name="B"><shadow type="math_number" id="XM_M:SC[VCESWR@Py5G*"><field name="NUM">0</field></shadow><block type="variables_get" id="vO:hvmBO##jbyQ^0o/ko"><field name="VAR" id="M(7AH?+8v6zTaG-9L5xB">derivative</field></block></value></block></value><next><block type="variables_set" id="}D%-?|U/i|v)_VN*^%L{"><field name="VAR" id="C$ThK|Ulw.|FI~0rgbcU">lastError</field><value name="VALUE"><shadow type="math_number" id="7TYF_;`lqtrSEYO0}Q,b"><field name="NUM">0</field></shadow><block type="variables_get" id="F2ATuic`)Sb1g}^w;5V/"><field name="VAR" id="R@7=s8NpT+ATF`(/)X7[">error</field></block></value><next><block type="variables_set" id="/q;!Qm_O8Y@JYU*5Xp27"><field name="VAR" id="|MYMsQP_V2$B6~5.u5I5">output</field><value name="VALUE"><shadow type="math_number" id="X0xySUGY)~cZv#u:x9IQ"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="d6]s;,gG4+81O@k)v7KM"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="_=hI(QV]2w]%8sR6H8,v"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="_cl~G4W6u[w=S+?[W8O2"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id="jHm93@NWmeR?B.|~7v?n"><field name="NUM">0</field></shadow><block type="variables_get" id=";V3gcP5o^zA}JV3y;3M4"><field name="VAR" id="fwsF*J2p[OuJm;Q8h,3H">P</field></block></value><value name="B"><shadow type="math_number" id="o,cDqt,=;sPZG-d,M|db"><field name="NUM">0</field></shadow><block type="variables_get" id="st=J{I#b`vj0v6Dl%)!P"><field name="VAR" id="KG8R|kuse?a(d=cqAfS^">I</field></block></value></block></value><value name="B"><shadow type="math_number" id="aNV+_UcJ)e:wCV?dOAsV"><field name="NUM">0</field></shadow><block type="variables_get" id="W8XqEET[|yQ:P~Q-/)T{"><field name="VAR" id=")Ieu9NZiQ~IE6e+_cE06">D</field></block></value></block></value><next><block type="function_return" id="UU3Jqd+z*z:jv`Oh;o.u"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="N$Tlgk}8*0q5k!N17THU"><field name="NUM">0</field></shadow><block type="variables_get" id="/:E^PN(SGmnJCCKE:67I"><field name="VAR" id="|MYMsQP_V2$B6~5.u5I5">output</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>